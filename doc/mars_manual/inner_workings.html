<!-- DO NOT EDIT THIS FILE! IT IS AUTOMATICALLY GENERATED BY markdown2marshtml //-->
             <!DOCTYPE html>
             <html>
               <head>
                 <title>MARS Simulator</title>
                 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
                 <meta name="description" content="MARS is a flexible physics simulator.">
                 <meta name="author" content="MARS Project">
                 <meta name="keywords" content="MARS, simulation, physics, robotics">
                 <link rel="stylesheet" type="text/css" href="../src/css/mars_default.css" media="all" />
               </head>
             <body>
               <div class="nav-box">
                 <h2>Navigation</h2>
                 <nav>
                   <ol>
                     <li><a href="../mars_manual/index.html">Home</a></li>
                     </ul>
<li>Utils</li>
<ul>
  <li><a href="../mars_manual/common/utils/utils.html">Utils</a></li>
      <li><a href="../mars_manual/common/data_broker/data_broker.html">Data Broker</a></li>
      <li><a href="../mars_manual/common/lib_manager/lib_manager.html">Lib Manager</a></li>
</ul>
</ul>
      <li><a href="../mars_manual/libraries.html">Libraries</a></li>
  <li><a href="../mars_manual/inner_workings.html">Inner Workings</a></li>
<ul>
  <li><a href=#overview>Overview</a></li>
<li><a href=#loading-reloading-scenes>Loading Reloading Scenes</a></li>
</ul>
  <li><a href="../mars_manual/mars_scenes.html">Mars Scenes</a></li>
  <li><a href="../mars_manual/documentation_structure.html">Documentation Structure</a></li>
  <li><a href="../mars_manual/installation.html">Installation</a></li>
  <li>Tutorials</li>
  <ul>
    <li><a href="../mars_manual/tutorials/plugins.html">Plugins</a></li>
    <li><a href="../mars_manual/tutorials/building_mars.html">Building Mars</a></li>
    <li><a href="../mars_manual/tutorials/advanced_modeling.html">Advanced Modeling</a></li>
    <li><a href="../mars_manual/tutorials/basic_modeling.html">Basic Modeling</a></li>
</ul>
</ul>

                   </ol>
                 </nav>
               </div>
               <div id="content">
               <header>
                 <a href="../mars_manual/index.html"><img src="../src/images/logo_v2_wob.png" alt="MARS" /></a>
               </header>
<h1 id="inner_workings">The inner workings of MARS</h1>
<h2 id="overview">Overview</h2>
<p>MARS makes use of multiple libraries, most importantly <em>Open Scene Graph</em> (OSG) for its visualisation, <em>Open Dynamics Engine</em> (ODE) for the physical simulation and <em>Qt</em> for the GUI. The following is an attempt to give a rough overview of how these libraries are integrated in MARS and how MARS' own classes work together while the program is running.</p>
<p>Typically, MARS will either be started up with a plugin loading a scene or started up empty with the subsequent manual loading of a scene via the file menu. In both cases, the command</p>
<pre><code>control-&gt;sim-&gt;loadScene(fileName)</code></pre>
<p>will be executed. To understand what is happening here, we first have to take a look at what ontrol and im mean in this context.</p>
<p>ontrol is a pointer to an instance of mars::interfaces::ControlCenter and a member of an instance of mars::sim::Simulator, which is the main class of the simulation. The mars::interfaces::ControlCenter interface provides access to a number of crucial interfaces of the simulation via its members. They are:</p>
<ul>
<li>cfg</li>
<li>nodes</li>
<li>joints</li>
<li>motors</li>
<li>controllers</li>
<li>sensors</li>
<li>sim</li>
<li>graphics</li>
<li>entities</li>
<li>dataBroker</li>
<li>loadCenter</li>
</ul>
<p>So ironically, the member ontrol of the mars::sim::Simulator class provides access to the mars::interfaces::SimulatorInterface the class implements. However, the usual case is that you will access the ontrol interface from the plugin you're developing. We will later get back to other typical examples of how to use these interfaces, but let's for now stick with what happens upon execution of the above oadScene command.</p>
<h2 id="loading-reloading-scenes">Loading / Reloading Scenes</h2>
<p>What happens when the oadScene method is called depends on whether or not the simulation is running at the time. As MARS uses multithreading, if it is running, it simply pushes the specified file into a list of files to be loaded when appropriate. Eventually, when these requests are being processed, MARS will execute mars::sim::Simulator::loadScene_internal. If MARS is not running, this method will be called directly.</p>
<p>oadScene_internal calls the method oadFile from the oadSceneInterface member interface of the oadCenter interface.</p>

      <footer>
        <a href="http://validator.w3.org/check?uri=referer" target="_blank">
          <img src="http://www.w3.org/Icons/valid-html401"
               alt="Valid HTML 4.01 Transitional"/>
        </a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer" target="_blank">
          <img src="http://jigsaw.w3.org/css-validator/images/vcss"
               alt="Valid CSS!"/>
        </a>
      </footer>
    </div>
  </body>
</html>
