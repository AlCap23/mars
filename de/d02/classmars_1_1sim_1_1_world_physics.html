<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>mars::sim::WorldPhysics Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../mars_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo_v2_wob.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">An open-source, flexible 3D physical simulation framework</div>
    </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d02/classmars_1_1sim_1_1_world_physics.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../de/dc7/classmars_1_1sim_1_1_world_physics-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mars::sim::WorldPhysics Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Declaration of the physical class, that implements the physics interface.  
 <a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for mars::sim::WorldPhysics:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/db2/classmars_1_1sim_1_1_world_physics__inherit__graph.svg" width="411" height="136"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for mars::sim::WorldPhysics:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/dd8/classmars_1_1sim_1_1_world_physics__coll__graph.svg" width="1198" height="803"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9401f1d7627899535de18700bed136f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a9401f1d7627899535de18700bed136f5">WorldPhysics</a> (<a class="el" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html">interfaces::ControlCenter</a> *<a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>)</td></tr>
<tr class="memdesc:a9401f1d7627899535de18700bed136f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor for the physical world.  <a href="#a9401f1d7627899535de18700bed136f5">More...</a><br/></td></tr>
<tr class="separator:a9401f1d7627899535de18700bed136f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28542684b59e25caab990a6b01f4d51"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#aa28542684b59e25caab990a6b01f4d51">~WorldPhysics</a> (void)</td></tr>
<tr class="memdesc:aa28542684b59e25caab990a6b01f4d51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close ODE environment.  <a href="#aa28542684b59e25caab990a6b01f4d51">More...</a><br/></td></tr>
<tr class="separator:aa28542684b59e25caab990a6b01f4d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088334813aaf1dea0905eb1c6e789aad"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a088334813aaf1dea0905eb1c6e789aad">initTheWorld</a> (void)</td></tr>
<tr class="memdesc:a088334813aaf1dea0905eb1c6e789aad"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the ode world.  <a href="#a088334813aaf1dea0905eb1c6e789aad">More...</a><br/></td></tr>
<tr class="separator:a088334813aaf1dea0905eb1c6e789aad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c78e163970940395f4d3a43b81a28da"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7c78e163970940395f4d3a43b81a28da">freeTheWorld</a> (void)</td></tr>
<tr class="memdesc:a7c78e163970940395f4d3a43b81a28da"><td class="mdescLeft">&#160;</td><td class="mdescRight">This functions destroys the ode world.  <a href="#a7c78e163970940395f4d3a43b81a28da">More...</a><br/></td></tr>
<tr class="separator:a7c78e163970940395f4d3a43b81a28da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f997528c9377badb46e32ad03b78ae"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a78f997528c9377badb46e32ad03b78ae">stepTheWorld</a> (void)</td></tr>
<tr class="memdesc:a78f997528c9377badb46e32ad03b78ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles the calculation of a step in the world.  <a href="#a78f997528c9377badb46e32ad03b78ae">More...</a><br/></td></tr>
<tr class="separator:a78f997528c9377badb46e32ad03b78ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb61c39a318f3577a162324674608e69"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#acb61c39a318f3577a162324674608e69">existsWorld</a> (void) const </td></tr>
<tr class="memdesc:acb61c39a318f3577a162324674608e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if a world exists.  <a href="#acb61c39a318f3577a162324674608e69">More...</a><br/></td></tr>
<tr class="separator:acb61c39a318f3577a162324674608e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5474d4e366f4ca2334e65ab7bfdfc5db"><td class="memItemLeft" align="right" valign="top">virtual const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a5474d4e366f4ca2334e65ab7bfdfc5db">getCenterOfMass</a> (const std::vector&lt; <a class="el" href="../../da/d43/classmars_1_1interfaces_1_1_node_interface.html">interfaces::NodeInterface</a> * &gt; &amp;nodes) const </td></tr>
<tr class="separator:a5474d4e366f4ca2334e65ab7bfdfc5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aed565f0778a9bf7284cb04417dd222"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a1aed565f0778a9bf7284cb04417dd222">update</a> (std::vector&lt; <a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a> &gt; *drawItems)</td></tr>
<tr class="memdesc:a1aed565f0778a9bf7284cb04417dd222"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the update function that updates the position of the vertices of all draw_item structs contained in drawItems.  <a href="#a1aed565f0778a9bf7284cb04417dd222">More...</a><br/></td></tr>
<tr class="separator:a1aed565f0778a9bf7284cb04417dd222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f0b941fb171e7ca64a8d2d822d99a5"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad7f0b941fb171e7ca64a8d2d822d99a5">checkCollisions</a> (void)</td></tr>
<tr class="separator:ad7f0b941fb171e7ca64a8d2d822d99a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898eb9e2aebe1ff6645f933b22739437"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a898eb9e2aebe1ff6645f933b22739437">getVectorCollision</a> (const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a> &amp;pos, const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a> &amp;ray) const </td></tr>
<tr class="separator:a898eb9e2aebe1ff6645f933b22739437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5320c16b8d9863d1259e6ffd93fe1030"><td class="memItemLeft" align="right" valign="top">dWorldID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a5320c16b8d9863d1259e6ffd93fe1030">getWorld</a> (void) const </td></tr>
<tr class="memdesc:a5320c16b8d9863d1259e6ffd93fe1030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ode ID of the world object.  <a href="#a5320c16b8d9863d1259e6ffd93fe1030">More...</a><br/></td></tr>
<tr class="separator:a5320c16b8d9863d1259e6ffd93fe1030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b9ff110782f1966429576a4334cd9d"><td class="memItemLeft" align="right" valign="top">dSpaceID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a79b9ff110782f1966429576a4334cd9d">getSpace</a> (void) const </td></tr>
<tr class="memdesc:a79b9ff110782f1966429576a4334cd9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ode ID of the main space object.  <a href="#a79b9ff110782f1966429576a4334cd9d">More...</a><br/></td></tr>
<tr class="separator:a79b9ff110782f1966429576a4334cd9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a5fbe9864944dc6a45a407643c95687"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a5fbe9864944dc6a45a407643c95687">getCompositeBody</a> (int comp_group, dBodyID *body, <a class="el" href="../../d7/d2b/classmars_1_1sim_1_1_node_physics.html">NodePhysics</a> *node)</td></tr>
<tr class="memdesc:a3a5fbe9864944dc6a45a407643c95687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the body pointer param to the body for the comp_group_id.  <a href="#a3a5fbe9864944dc6a45a407643c95687">More...</a><br/></td></tr>
<tr class="separator:a3a5fbe9864944dc6a45a407643c95687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab803525826a8ecaa5438b281c859bede"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ab803525826a8ecaa5438b281c859bede">destroyBody</a> (dBodyID theBody, <a class="el" href="../../d7/d2b/classmars_1_1sim_1_1_node_physics.html">NodePhysics</a> *node)</td></tr>
<tr class="memdesc:ab803525826a8ecaa5438b281c859bede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroyes a body from a node:  <a href="#ab803525826a8ecaa5438b281c859bede">More...</a><br/></td></tr>
<tr class="separator:ab803525826a8ecaa5438b281c859bede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0936e9ebd0614f7bf0006882259937c3"><td class="memItemLeft" align="right" valign="top">dReal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a0936e9ebd0614f7bf0006882259937c3">getWorldStep</a> (void)</td></tr>
<tr class="memdesc:a0936e9ebd0614f7bf0006882259937c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the stepsize for calculating a world step.  <a href="#a0936e9ebd0614f7bf0006882259937c3">More...</a><br/></td></tr>
<tr class="separator:a0936e9ebd0614f7bf0006882259937c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdafca3909ab4629997b23bd032e87cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#acdafca3909ab4629997b23bd032e87cf">resetCompositeMass</a> (dBodyID theBody)</td></tr>
<tr class="memdesc:acdafca3909ab4629997b23bd032e87cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">resets the mass of a composite body  <a href="#acdafca3909ab4629997b23bd032e87cf">More...</a><br/></td></tr>
<tr class="separator:acdafca3909ab4629997b23bd032e87cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f852f1db89d51630bcc940827254c9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3f852f1db89d51630bcc940827254c9c">moveCompositeMassCenter</a> (dBodyID theBody, dReal x, dReal y, dReal z)</td></tr>
<tr class="separator:a3f852f1db89d51630bcc940827254c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a24ee237949d634dbe40eb06de652ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a8a24ee237949d634dbe40eb06de652ea">handleCollision</a> (dGeomID theGeom)</td></tr>
<tr class="separator:a8a24ee237949d634dbe40eb06de652ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af52ed32cc2b12a2cf0e012abcb7e2a0f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af52ed32cc2b12a2cf0e012abcb7e2a0f">getCollisionDepth</a> (dGeomID theGeom)</td></tr>
<tr class="separator:af52ed32cc2b12a2cf0e012abcb7e2a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmars_1_1interfaces_1_1_physics_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmars_1_1interfaces_1_1_physics_interface')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html">mars::interfaces::PhysicsInterface</a></td></tr>
<tr class="memitem:a84d0743a493924473e2daba66ee6f3f8 inherit pub_methods_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a84d0743a493924473e2daba66ee6f3f8">~PhysicsInterface</a> ()</td></tr>
<tr class="separator:a84d0743a493924473e2daba66ee6f3f8 inherit pub_methods_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae888578321a1189624890dca8d7aa784"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html">utils::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a></td></tr>
<tr class="separator:ae888578321a1189624890dca8d7aa784"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classmars_1_1interfaces_1_1_physics_interface')"><img src="../../closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html">mars::interfaces::PhysicsInterface</a></td></tr>
<tr class="memitem:a20c7f3500d5a382720cd37fdc997d3a2 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a20c7f3500d5a382720cd37fdc997d3a2">ground_friction</a></td></tr>
<tr class="separator:a20c7f3500d5a382720cd37fdc997d3a2 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aaf04bc9b744b1606f8be586570b697 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8aaf04bc9b744b1606f8be586570b697">ground_cfm</a></td></tr>
<tr class="separator:a8aaf04bc9b744b1606f8be586570b697 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e5435c1232b2bfae75d6844531d708b inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8e5435c1232b2bfae75d6844531d708b">ground_erp</a></td></tr>
<tr class="separator:a8e5435c1232b2bfae75d6844531d708b inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c25f2162ac9aa89a19dcf959461df13 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a></td></tr>
<tr class="memdesc:a8c25f2162ac9aa89a19dcf959461df13 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="mdescLeft">&#160;</td><td class="mdescRight">Step size in seconds.  <a href="#a8c25f2162ac9aa89a19dcf959461df13">More...</a><br/></td></tr>
<tr class="separator:a8c25f2162ac9aa89a19dcf959461df13 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b23b306bf81a2ee57429bf90567698 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a></td></tr>
<tr class="separator:a40b23b306bf81a2ee57429bf90567698 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c872f3cd891d401173f0cc6dab01e09 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0c872f3cd891d401173f0cc6dab01e09">fast_step</a></td></tr>
<tr class="separator:a0c872f3cd891d401173f0cc6dab01e09 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a444a06fb0422b9b3de98b9e90b694657 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a444a06fb0422b9b3de98b9e90b694657">draw_contact_points</a></td></tr>
<tr class="separator:a444a06fb0422b9b3de98b9e90b694657 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f3e63cfb276a7f638ab7b2ad0cb7dd inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a></td></tr>
<tr class="separator:a42f3e63cfb276a7f638ab7b2ad0cb7dd inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b84008122d854153a151794c08941f1 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a></td></tr>
<tr class="separator:a6b84008122d854153a151794c08941f1 inherit pub_attribs_classmars_1_1interfaces_1_1_physics_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a166a824453829b32a67ae3d6537c41e5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27">interfaces::PhysicsError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a166a824453829b32a67ae3d6537c41e5">error</a> = PHYSICS_NO_ERROR</td></tr>
<tr class="separator:a166a824453829b32a67ae3d6537c41e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a22a4fbbd3a16d81ed46599bc8e4d32b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22a4fbbd3a16d81ed46599bc8e4d32b2">nearCallback</a> (dGeomID o1, dGeomID o2)</td></tr>
<tr class="memdesc:a22a4fbbd3a16d81ed46599bc8e4d32b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">In this function the collision handling from ode is performed.  <a href="#a22a4fbbd3a16d81ed46599bc8e4d32b2">More...</a><br/></td></tr>
<tr class="separator:a22a4fbbd3a16d81ed46599bc8e4d32b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmars_1_1interfaces_1_1_draw_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmars_1_1interfaces_1_1_draw_interface')"><img src="../../closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="../../de/ded/classmars_1_1interfaces_1_1_draw_interface.html">mars::interfaces::DrawInterface</a></td></tr>
<tr class="memitem:aa60cec10b72db6d40a7adac8254df19d inherit pub_methods_classmars_1_1interfaces_1_1_draw_interface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ded/classmars_1_1interfaces_1_1_draw_interface.html#aa60cec10b72db6d40a7adac8254df19d">~DrawInterface</a> ()</td></tr>
<tr class="separator:aa60cec10b72db6d40a7adac8254df19d inherit pub_methods_classmars_1_1interfaces_1_1_draw_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:af5f4f588b651da097ac096378523acb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">callbackForward</a> (void *data, dGeomID o1, dGeomID o2)</td></tr>
<tr class="memdesc:af5f4f588b651da097ac096378523acb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This static function is used to project a normal function pointer to a method from a class.  <a href="#af5f4f588b651da097ac096378523acb8">More...</a><br/></td></tr>
<tr class="separator:af5f4f588b651da097ac096378523acb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a89ddb6065e450ef31627674a91e5c310"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html">utils::Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">drawLock</a></td></tr>
<tr class="separator:a89ddb6065e450ef31627674a91e5c310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb15a5f58a7ed63f643526d1c3d6e8cd"><td class="memItemLeft" align="right" valign="top">dSpaceID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a></td></tr>
<tr class="separator:adb15a5f58a7ed63f643526d1c3d6e8cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa62b97cc64dab6af4175b6afd7abc9"><td class="memItemLeft" align="right" valign="top">dWorldID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a></td></tr>
<tr class="separator:adaa62b97cc64dab6af4175b6afd7abc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e76e1aa6d0db039aeb482fa941640e"><td class="memItemLeft" align="right" valign="top">dGeomID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ac1e76e1aa6d0db039aeb482fa941640e">plane</a></td></tr>
<tr class="separator:ac1e76e1aa6d0db039aeb482fa941640e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc9baa34518f8a3e52a7b16066c9b17"><td class="memItemLeft" align="right" valign="top">dJointGroupID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a></td></tr>
<tr class="separator:adcc9baa34518f8a3e52a7b16066c9b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a95c1788dab57d4e338c4bb08be5a46"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a></td></tr>
<tr class="separator:a3a95c1788dab57d4e338c4bb08be5a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e3ce712f543582c4ad43b75aa8b7b95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html">interfaces::ControlCenter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a></td></tr>
<tr class="separator:a6e3ce712f543582c4ad43b75aa8b7b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd415f675224c4921b9acc9ec134fc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">old_gravity</a></td></tr>
<tr class="separator:adbd415f675224c4921b9acc9ec134fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d09b66049e3de049c4edf104e769a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">old_cfm</a></td></tr>
<tr class="separator:ad1d09b66049e3de049c4edf104e769a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc642746e0b511659fda3fa239477ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">old_erp</a></td></tr>
<tr class="separator:adbc642746e0b511659fda3fa239477ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b397ad6a1bc0c080f6e79286818428"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d1/dfb/structmars_1_1sim_1_1body__nbr__tupel.html">body_nbr_tupel</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a></td></tr>
<tr class="separator:ad3b397ad6a1bc0c080f6e79286818428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a204b4fc77e71f70765f004e815a76"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">draw_intern</a></td></tr>
<tr class="separator:a98a204b4fc77e71f70765f004e815a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16cbf034b628f8a238fbb69ad2f7b7f5"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">draw_extern</a></td></tr>
<tr class="separator:a16cbf034b628f8a238fbb69ad2f7b7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7014cfdecaa2cc84314b4cd4ef5136b0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; dJointFeedback * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a></td></tr>
<tr class="separator:a7014cfdecaa2cc84314b4cd4ef5136b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7cfb1d19c3f2813c7f82c895dba254"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">create_contacts</a></td></tr>
<tr class="separator:a3b7cfb1d19c3f2813c7f82c895dba254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937793318e80bc5e339db76790c7fbca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">log_contacts</a></td></tr>
<tr class="separator:a937793318e80bc5e339db76790c7fbca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e992b3a5f7d37af57f91c2a2723cd3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a></td></tr>
<tr class="separator:ae4e992b3a5f7d37af57f91c2a2723cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e90498995ed247107895b1293fc6f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">ray_collision</a></td></tr>
<tr class="separator:a22e90498995ed247107895b1293fc6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declaration of the physical class, that implements the physics interface. </p>

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00085">85</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9401f1d7627899535de18700bed136f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mars::sim::WorldPhysics::WorldPhysics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html">interfaces::ControlCenter</a> *&#160;</td>
          <td class="paramname"><em>control</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor for the physical world. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>all private variables should be initialized correct should correct be spezified?</li>
<li>world, space, contactgroup and world_init to false (0) </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00085">85</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                     {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      this-&gt;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a> = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a444a06fb0422b9b3de98b9e90b694657">draw_contact_points</a> = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0c872f3cd891d401173f0cc6dab01e09">fast_step</a> = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a> = 1e-10;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a> = 0.1;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a> = <a class="code" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">Vector</a>(0.0, 0.0, -9.81);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a20c7f3500d5a382720cd37fdc997d3a2">ground_friction</a> = 20;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8aaf04bc9b744b1606f8be586570b697">ground_cfm</a> = 0.00000001;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8e5435c1232b2bfae75d6844531d708b">ground_erp</a> = 0.1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a> = 0;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a> = 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a> = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a> = 0;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a> = 0;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">create_contacts</a> = 1;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">log_contacts</a> = 0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">// the step size in seconds</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a> = 0.01;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// dInitODE is relevant for using trimesh objects as correct as</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// possible in the ode implementation</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#ifdef ODE11</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor"></span>      <span class="comment">// for ode-0.11</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      dInitODE2(0);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      dAllocateODEDataForThread(dAllocateMaskAll);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor"></span>      dInitODE();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor"></span>      dSetErrorHandler (<a class="code" href="../../d2/d57/namespacemars_1_1sim.html#ad82523e3dad3c3f30a83da1a6650febd">myErrorFunction</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      dSetDebugHandler (<a class="code" href="../../d2/d57/namespacemars_1_1sim.html#addce80d70167268281806c07aba4478b">myDebugFunction</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      dSetMessageHandler (<a class="code" href="../../d2/d57/namespacemars_1_1sim.html#a7e8440fbd3d9f230a660abbe13736fc3">myMessageFunction</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a40b23b306bf81a2ee57429bf90567698"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">mars::interfaces::PhysicsInterface::world_gravity</a></div><div class="ttdeci">utils::Vector world_gravity</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00057">PhysicsInterface.h:57</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a937793318e80bc5e339db76790c7fbca"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">mars::sim::WorldPhysics::log_contacts</a></div><div class="ttdeci">bool log_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a8e5435c1232b2bfae75d6844531d708b"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8e5435c1232b2bfae75d6844531d708b">mars::interfaces::PhysicsInterface::ground_erp</a></div><div class="ttdeci">sReal ground_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00055">PhysicsInterface.h:55</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a42f3e63cfb276a7f638ab7b2ad0cb7dd"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">mars::interfaces::PhysicsInterface::world_cfm</a></div><div class="ttdeci">sReal world_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3a95c1788dab57d4e338c4bb08be5a46"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">mars::sim::WorldPhysics::world_init</a></div><div class="ttdeci">bool world_init</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00118">WorldPhysics.h:118</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a8aaf04bc9b744b1606f8be586570b697"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8aaf04bc9b744b1606f8be586570b697">mars::interfaces::PhysicsInterface::ground_cfm</a></div><div class="ttdeci">sReal ground_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00055">PhysicsInterface.h:55</a></div></div>
<div class="ttc" id="namespacemars_1_1sim_html_a7e8440fbd3d9f230a660abbe13736fc3"><div class="ttname"><a href="../../d2/d57/namespacemars_1_1sim.html#a7e8440fbd3d9f230a660abbe13736fc3">mars::sim::myMessageFunction</a></div><div class="ttdeci">void myMessageFunction(int errnum, const char *msg, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00057">WorldPhysics.cpp:57</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a444a06fb0422b9b3de98b9e90b694657"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a444a06fb0422b9b3de98b9e90b694657">mars::interfaces::PhysicsInterface::draw_contact_points</a></div><div class="ttdeci">bool draw_contact_points</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00059">PhysicsInterface.h:59</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a6b84008122d854153a151794c08941f1"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">mars::interfaces::PhysicsInterface::world_erp</a></div><div class="ttdeci">sReal world_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae4e992b3a5f7d37af57f91c2a2723cd3"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">mars::sim::WorldPhysics::num_contacts</a></div><div class="ttdeci">int num_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00128">WorldPhysics.h:128</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a20c7f3500d5a382720cd37fdc997d3a2"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a20c7f3500d5a382720cd37fdc997d3a2">mars::interfaces::PhysicsInterface::ground_friction</a></div><div class="ttdeci">sReal ground_friction</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00055">PhysicsInterface.h:55</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a8c25f2162ac9aa89a19dcf959461df13"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">mars::interfaces::PhysicsInterface::step_size</a></div><div class="ttdeci">sReal step_size</div><div class="ttdoc">Step size in seconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00056">PhysicsInterface.h:56</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adcc9baa34518f8a3e52a7b16066c9b17"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">mars::sim::WorldPhysics::contactgroup</a></div><div class="ttdeci">dJointGroupID contactgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00117">WorldPhysics.h:117</a></div></div>
<div class="ttc" id="namespacemars_1_1utils_html_a878c2da91f03d7f72c4326de3713cad8"><div class="ttname"><a href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">mars::utils::Vector</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vector</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/_vector_8h_source.html#l00043">Vector.h:43</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3b7cfb1d19c3f2813c7f82c895dba254"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">mars::sim::WorldPhysics::create_contacts</a></div><div class="ttdeci">bool create_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="namespacemars_1_1sim_html_addce80d70167268281806c07aba4478b"><div class="ttname"><a href="../../d2/d57/namespacemars_1_1sim.html#addce80d70167268281806c07aba4478b">mars::sim::myDebugFunction</a></div><div class="ttdeci">void myDebugFunction(int errnum, const char *msg, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00062">WorldPhysics.cpp:62</a></div></div>
<div class="ttc" id="namespacemars_1_1sim_html_ad82523e3dad3c3f30a83da1a6650febd"><div class="ttname"><a href="../../d2/d57/namespacemars_1_1sim.html#ad82523e3dad3c3f30a83da1a6650febd">mars::sim::myErrorFunction</a></div><div class="ttdeci">void myErrorFunction(int errnum, const char *msg, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00068">WorldPhysics.cpp:68</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a6e3ce712f543582c4ad43b75aa8b7b95"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">mars::sim::WorldPhysics::control</a></div><div class="ttdeci">interfaces::ControlCenter * control</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00119">WorldPhysics.h:119</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a0c872f3cd891d401173f0cc6dab01e09"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0c872f3cd891d401173f0cc6dab01e09">mars::interfaces::PhysicsInterface::fast_step</a></div><div class="ttdeci">bool fast_step</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00058">PhysicsInterface.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa28542684b59e25caab990a6b01f4d51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mars::sim::WorldPhysics::~WorldPhysics </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close ODE environment. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>everthing that was created should be destroyed </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00131">131</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                    {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// free the ode objects</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7c78e163970940395f4d3a43b81a28da">freeTheWorld</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">// and close the ODE ...</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      dCloseODE();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a7c78e163970940395f4d3a43b81a28da"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7c78e163970940395f4d3a43b81a28da">mars::sim::WorldPhysics::freeTheWorld</a></div><div class="ttdeci">virtual void freeTheWorld(void)</div><div class="ttdoc">This functions destroys the ode world. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00189">WorldPhysics.cpp:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af5f4f588b651da097ac096378523acb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::callbackForward </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>o1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>o2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This static function is used to project a normal function pointer to a method from a class. </p>
<p>pre:</p>
<ul>
<li>data is a pointer to a correct object from type <a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html" title="Declaration of the physical class, that implements the physics interface. ">WorldPhysics</a></li>
</ul>
<p>post:</p>
<ul>
<li>the newCallback method of the data object should be called </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00752">752</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                                                                         {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a9401f1d7627899535de18700bed136f5">WorldPhysics</a> *wp = (<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a9401f1d7627899535de18700bed136f5">WorldPhysics</a>*)data;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      wp-&gt;nearCallback(o1, o2);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a9401f1d7627899535de18700bed136f5"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a9401f1d7627899535de18700bed136f5">mars::sim::WorldPhysics::WorldPhysics</a></div><div class="ttdeci">WorldPhysics(interfaces::ControlCenter *control)</div><div class="ttdoc">The constructor for the physical world. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00085">WorldPhysics.cpp:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad7f0b941fb171e7ca64a8d2d822d99a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mars::sim::WorldPhysics::checkCollisions </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a1952e5c4df1694926fd4136a5725aae2">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00875">875</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                          {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a> = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">log_contacts</a> = 0;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">create_contacts</a> = 0;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      dSpaceCollide(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>,<span class="keyword">this</span>, &amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">WorldPhysics::callbackForward</a>);    </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a937793318e80bc5e339db76790c7fbca"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">mars::sim::WorldPhysics::log_contacts</a></div><div class="ttdeci">bool log_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae4e992b3a5f7d37af57f91c2a2723cd3"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">mars::sim::WorldPhysics::num_contacts</a></div><div class="ttdeci">int num_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00128">WorldPhysics.h:128</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3b7cfb1d19c3f2813c7f82c895dba254"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">mars::sim::WorldPhysics::create_contacts</a></div><div class="ttdeci">bool create_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_af5f4f588b651da097ac096378523acb8"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">mars::sim::WorldPhysics::callbackForward</a></div><div class="ttdeci">static void callbackForward(void *data, dGeomID o1, dGeomID o2)</div><div class="ttdoc">This static function is used to project a normal function pointer to a method from a class...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00752">WorldPhysics.cpp:752</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab803525826a8ecaa5438b281c859bede"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::destroyBody </td>
          <td>(</td>
          <td class="paramtype">dBodyID&#160;</td>
          <td class="paramname"><em>theBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2b/classmars_1_1sim_1_1_node_physics.html">NodePhysics</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroyes a body from a node: </p>
<p>This function checks if not more than one geom is connected to the body and destroyes the body in that case. In the other case the counter of the connected geoms is decreased.</p>
<p>pre:</p>
<ul>
<li>the body exists in the physical world</li>
</ul>
<p>post:</p>
<ul>
<li>if more than one geoms are connected to the body, decrease the counter of connected geoms</li>
<li>otherwise, if only one geom is connected to the body, destroy the body </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00375">375</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                                                     {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      std::vector&lt;body_nbr_tupel&gt;::iterator iter;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      std::vector&lt;NodePhysics*&gt;::iterator jter;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">for</span>(iter = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.begin(); iter != <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.end(); iter++) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span>((*iter).body == theBody) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="keywordflow">if</span>((*iter).connected_geoms &gt; 1) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            (*iter).connected_geoms--;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">for</span>(jter = (*iter).comp_nodes.begin();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                jter != (*iter).comp_nodes.end(); jter++) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;              <span class="keywordflow">if</span>((*jter) == node) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                (*iter).comp_nodes.erase(jter);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;              }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#acdafca3909ab4629997b23bd032e87cf">resetCompositeMass</a>(theBody);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            dBodyDestroy(theBody);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.erase(iter);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="comment">// if we get here in the code, the body is not in the list and can</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// be removed from the world</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      dBodyDestroy(theBody);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_acdafca3909ab4629997b23bd032e87cf"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#acdafca3909ab4629997b23bd032e87cf">mars::sim::WorldPhysics::resetCompositeMass</a></div><div class="ttdeci">void resetCompositeMass(dBodyID theBody)</div><div class="ttdoc">resets the mass of a composite body </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00765">WorldPhysics.cpp:765</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad3b397ad6a1bc0c080f6e79286818428"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">mars::sim::WorldPhysics::comp_body_list</a></div><div class="ttdeci">std::vector&lt; body_nbr_tupel &gt; comp_body_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00123">WorldPhysics.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb61c39a318f3577a162324674608e69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mars::sim::WorldPhysics::existsWorld </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if a world exists. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>return state of world_init </li>
</ul>

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a3c110a4af15fc92bb66543a0e42a59df">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00210">210</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                             {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3a95c1788dab57d4e338c4bb08be5a46"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">mars::sim::WorldPhysics::world_init</a></div><div class="ttdeci">bool world_init</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00118">WorldPhysics.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c78e163970940395f4d3a43b81a28da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::freeTheWorld </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This functions destroys the ode world. </p>
<p>pre:</p>
<ul>
<li>world_init = true</li>
</ul>
<p>post:</p>
<ul>
<li>world, space and contactgroup have to be destroyed here</li>
<li>afte that, world_init have to become false </li>
</ul>

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a237c54f413b6ed30eae06c1c8c282c7f">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00189">189</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                        {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">//LOG_DEBUG(&quot;free physics world&quot;);</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        dJointGroupDestroy(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        dSpaceDestroy(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        dWorldDestroy(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a> = 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="comment">// else debug something</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3a95c1788dab57d4e338c4bb08be5a46"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">mars::sim::WorldPhysics::world_init</a></div><div class="ttdeci">bool world_init</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00118">WorldPhysics.h:118</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adcc9baa34518f8a3e52a7b16066c9b17"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">mars::sim::WorldPhysics::contactgroup</a></div><div class="ttdeci">dJointGroupID contactgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00117">WorldPhysics.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5474d4e366f4ca2334e65ab7bfdfc5db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">Vector</a> mars::sim::WorldPhysics::getCenterOfMass </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../da/d43/classmars_1_1interfaces_1_1_node_interface.html">interfaces::NodeInterface</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>nodes</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a2784e87fa30f99b0c422816ca7e66e38">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00805">805</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                                                                           {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <a class="code" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">Vector</a> center;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      std::vector&lt;NodeInterface*&gt;::const_iterator iter;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      dMass sumMass;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      dMass tMass;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      dMassSetZero(&amp;sumMass);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">for</span>(iter = nodes.begin(); iter != nodes.end(); iter++) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        ((NodePhysics*)(*iter))-&gt;getAbsMass(&amp;tMass);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        dMassAdd(&amp;sumMass, &amp;tMass);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      center.x() = sumMass.c[0];</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      center.y() = sumMass.c[1];</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      center.z() = sumMass.c[2];</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">return</span> center;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="namespacemars_1_1utils_html_a878c2da91f03d7f72c4326de3713cad8"><div class="ttname"><a href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">mars::utils::Vector</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vector</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/_vector_8h_source.html#l00043">Vector.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af52ed32cc2b12a2cf0e012abcb7e2a0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mars::sim::WorldPhysics::getCollisionDepth </td>
          <td>(</td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>theGeom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00844">844</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                                                          {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      dGeomID otherGeom;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      dContact contact[1];</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordtype">double</span> depth = 0.0;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordtype">int</span> numc;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      dBodyID b1;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      dBodyID b2;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dSpaceGetNumGeoms(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>); i++) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        otherGeom = dSpaceGetGeom(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>, i);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span>(!(dGeomGetCollideBits(theGeom) &amp; dGeomGetCollideBits(otherGeom)))</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        b1 = dGeomGetBody(theGeom);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        b2 = dGeomGetBody(otherGeom);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">if</span>(b1 &amp;&amp; b2 &amp;&amp; dAreConnectedExcluding(b1,b2,dJointTypeContact))</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        numc = dCollide(theGeom, otherGeom, 1 | CONTACTS_UNIMPORTANT,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        &amp;(contact[0].geom), <span class="keyword">sizeof</span>(dContact));</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span>(numc) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          <span class="keywordflow">if</span>(contact[0].geom.depth &gt; depth)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            depth = contact[0].geom.depth;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">return</span> depth;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3a5fbe9864944dc6a45a407643c95687"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mars::sim::WorldPhysics::getCompositeBody </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>comp_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dBodyID *&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d2b/classmars_1_1sim_1_1_node_physics.html">NodePhysics</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the body pointer param to the body for the comp_group_id. </p>
<p>The functions sets the body pointer to the body ID that represents the composite object. If no body is aviable for the composite group a body will be created. The functions return if an body allready exists or if one had been created.</p>
<p>Careful with this function, bad implementation. This function should be only called if a new geom will be conected to the given body.</p>
<p>pre:</p>
<ul>
<li>comp_group &gt; 0</li>
</ul>
<p>post:</p>
<ul>
<li>body pointer should be set to a regular body that is in the vector comp_body_list</li>
<li>retruned true if a body was created, otherwise retruned false </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00335">335</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                                           {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      body_nbr_tupel tmp_tupel;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// if comp_group is bad, debug something</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span>(comp_group &gt; 0) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        std::vector&lt;body_nbr_tupel&gt;::iterator iter;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">for</span>( iter = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.begin(); iter != <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.end(); iter++ ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          <span class="keywordflow">if</span>((*iter).comp_group == comp_group) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            (*iter).connected_geoms++;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            *body = (*iter).body;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            (*iter).comp_nodes.push_back(node);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        tmp_tupel.body = *body = dBodyCreate(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        tmp_tupel.comp_group = comp_group;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        tmp_tupel.connected_geoms = 1;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        tmp_tupel.comp_nodes.push_back(node);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.push_back(tmp_tupel);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad3b397ad6a1bc0c080f6e79286818428"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">mars::sim::WorldPhysics::comp_body_list</a></div><div class="ttdeci">std::vector&lt; body_nbr_tupel &gt; comp_body_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00123">WorldPhysics.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79b9ff110782f1966429576a4334cd9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dSpaceID mars::sim::WorldPhysics::getSpace </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the ode ID of the main space object. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>space ID returned </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00311">311</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                              {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a898eb9e2aebe1ff6645f933b22739437"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double mars::sim::WorldPhysics::getVectorCollision </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>ray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0a954516d1896ff89242ac5d5a1a1c26">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00883">883</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                                                                     {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      dGeomID otherGeom;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      dContact contact[1];</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="comment">//double depth = ray.length();</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordtype">double</span> depth = ray.norm();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordtype">int</span> numc;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      dGeomID theGeom = dCreateRay(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>, depth);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      dGeomRaySet(theGeom, pos.x(), pos.y(), pos.z(), ray.x(), ray.y(), ray.z()); </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dSpaceGetNumGeoms(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>); i++) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        otherGeom = dSpaceGetGeom(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>, i);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">if</span>(!(dGeomGetCollideBits(theGeom) &amp; dGeomGetCollideBits(otherGeom)))</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        numc = dCollide(theGeom, otherGeom, 1 | CONTACTS_UNIMPORTANT,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        &amp;(contact[0].geom), <span class="keyword">sizeof</span>(dContact));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span>(numc) {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          <span class="keywordflow">if</span>(contact[0].geom.depth &lt; depth)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            depth = contact[0].geom.depth;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      dGeomDestroy(theGeom);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">return</span> depth;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5320c16b8d9863d1259e6ffd93fe1030"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dWorldID mars::sim::WorldPhysics::getWorld </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the ode ID of the world object. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>world ID returned </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00298">298</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                              {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0936e9ebd0614f7bf0006882259937c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dReal mars::sim::WorldPhysics::getWorldStep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the stepsize for calculating a world step. </p>
<p>pre:</p>
<ul>
<li>none</li>
</ul>
<p>post:</p>
<ul>
<li>the step_size value should be returned </li>
</ul>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00414">414</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                         {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a8c25f2162ac9aa89a19dcf959461df13"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">mars::interfaces::PhysicsInterface::step_size</a></div><div class="ttdeci">sReal step_size</div><div class="ttdoc">Step size in seconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00056">PhysicsInterface.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a24ee237949d634dbe40eb06de652ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mars::sim::WorldPhysics::handleCollision </td>
          <td>(</td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>theGeom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00837">837</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                                     {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">ray_collision</a> = 0;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      dSpaceCollide2(theGeom, (dGeomID)<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                     &amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">WorldPhysics::callbackForward</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">ray_collision</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a22e90498995ed247107895b1293fc6f0"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">mars::sim::WorldPhysics::ray_collision</a></div><div class="ttdeci">int ray_collision</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00129">WorldPhysics.h:129</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_af5f4f588b651da097ac096378523acb8"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">mars::sim::WorldPhysics::callbackForward</a></div><div class="ttdeci">static void callbackForward(void *data, dGeomID o1, dGeomID o2)</div><div class="ttdoc">This static function is used to project a normal function pointer to a method from a class...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00752">WorldPhysics.cpp:752</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a088334813aaf1dea0905eb1c6e789aad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::initTheWorld </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function initializes the ode world. </p>
<p>pre:</p>
<ul>
<li>world_init = false</li>
</ul>
<p>post:</p>
<ul>
<li>world, space and contactgroup should be created</li>
<li>the ODE world parameters should be set</li>
<li>at the end world_init have to become true </li>
</ul>

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#af71191bbf154081f6f5042d2edada089">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00150">150</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                        {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="comment">// if world_init = true debug something</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a>) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">//LOG_DEBUG(&quot;init physics world&quot;);</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a> = dWorldCreate();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a> = dHashSpaceCreate(0);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a> = dJointGroupCreate(0);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">old_gravity</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">old_cfm</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">old_erp</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        dWorldSetGravity(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.x(), <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.y(), <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.z()); </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        dWorldSetCFM(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, (dReal)<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        dWorldSetERP (<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, (dReal)<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        dWorldSetAutoDisableFlag (<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>,0);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// if usefull for some tests a ground can be created here</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ac1e76e1aa6d0db039aeb482fa941640e">plane</a> = 0; <span class="comment">//dCreatePlane (space,0,0,1,0);</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a> = 1;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        drawStruct draw;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        draw.ptr_draw = (DrawInterface*)<span class="keyword">this</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>-&gt;<a class="code" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a6e91e771b4745a5f3a402057b5bbe229">graphics</a>)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>-&gt;<a class="code" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a6e91e771b4745a5f3a402057b5bbe229">graphics</a>-&gt;<a class="code" href="../../d1/d93/classmars_1_1interfaces_1_1_graphics_manager_interface.html#a34313466281ba113cfac2d28fca4ee91">addDrawItems</a>(&amp;draw);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adbd415f675224c4921b9acc9ec134fc7"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">mars::sim::WorldPhysics::old_gravity</a></div><div class="ttdeci">utils::Vector old_gravity</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00120">WorldPhysics.h:120</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a40b23b306bf81a2ee57429bf90567698"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">mars::interfaces::PhysicsInterface::world_gravity</a></div><div class="ttdeci">utils::Vector world_gravity</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00057">PhysicsInterface.h:57</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_control_center_html_a6e91e771b4745a5f3a402057b5bbe229"><div class="ttname"><a href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a6e91e771b4745a5f3a402057b5bbe229">mars::interfaces::ControlCenter::graphics</a></div><div class="ttdeci">GraphicsManagerInterface * graphics</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/_control_center_8h_source.html#l00104">ControlCenter.h:104</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a42f3e63cfb276a7f638ab7b2ad0cb7dd"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">mars::interfaces::PhysicsInterface::world_cfm</a></div><div class="ttdeci">sReal world_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3a95c1788dab57d4e338c4bb08be5a46"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">mars::sim::WorldPhysics::world_init</a></div><div class="ttdeci">bool world_init</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00118">WorldPhysics.h:118</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_graphics_manager_interface_html_a34313466281ba113cfac2d28fca4ee91"><div class="ttname"><a href="../../d1/d93/classmars_1_1interfaces_1_1_graphics_manager_interface.html#a34313466281ba113cfac2d28fca4ee91">mars::interfaces::GraphicsManagerInterface::addDrawItems</a></div><div class="ttdeci">virtual void addDrawItems(drawStruct *draw)=0</div><div class="ttdoc">Adds drawStruct items to the graphics scene. </div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ac1e76e1aa6d0db039aeb482fa941640e"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ac1e76e1aa6d0db039aeb482fa941640e">mars::sim::WorldPhysics::plane</a></div><div class="ttdeci">dGeomID plane</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00116">WorldPhysics.h:116</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a6b84008122d854153a151794c08941f1"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">mars::interfaces::PhysicsInterface::world_erp</a></div><div class="ttdeci">sReal world_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad1d09b66049e3de049c4edf104e769a1"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">mars::sim::WorldPhysics::old_cfm</a></div><div class="ttdeci">interfaces::sReal old_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00121">WorldPhysics.h:121</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adcc9baa34518f8a3e52a7b16066c9b17"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">mars::sim::WorldPhysics::contactgroup</a></div><div class="ttdeci">dJointGroupID contactgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00117">WorldPhysics.h:117</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a6e3ce712f543582c4ad43b75aa8b7b95"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">mars::sim::WorldPhysics::control</a></div><div class="ttdeci">interfaces::ControlCenter * control</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00119">WorldPhysics.h:119</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adbc642746e0b511659fda3fa239477ab"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">mars::sim::WorldPhysics::old_erp</a></div><div class="ttdeci">interfaces::sReal old_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00121">WorldPhysics.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f852f1db89d51630bcc940827254c9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::moveCompositeMassCenter </td>
          <td>(</td>
          <td class="paramtype">dBodyID&#160;</td>
          <td class="paramname"><em>theBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dReal&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dReal&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dReal&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00784">784</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                                                 {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      std::vector&lt;body_nbr_tupel&gt;::iterator iter;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      std::vector&lt;NodePhysics*&gt;::iterator jter;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keyword">const</span> dReal *bpos;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="comment">// first we have to calculate the offset in bodyframe</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="comment">// so rotate the vector</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      bpos = dBodyGetPosition(theBody);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      dBodySetPosition(theBody, bpos[0]+x, bpos[1]+y, bpos[2]+z);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">for</span>(iter = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.begin(); iter != <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.end(); iter++) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">if</span>((*iter).body == theBody) {      </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">for</span>(jter = (*iter).comp_nodes.begin();</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;              jter != (*iter).comp_nodes.end(); jter++) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            (*jter)-&gt;addCompositeOffset(-x, -y, -z);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad3b397ad6a1bc0c080f6e79286818428"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">mars::sim::WorldPhysics::comp_body_list</a></div><div class="ttdeci">std::vector&lt; body_nbr_tupel &gt; comp_body_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00123">WorldPhysics.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a22a4fbbd3a16d81ed46599bc8e4d32b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::nearCallback </td>
          <td>(</td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>o1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dGeomID&#160;</td>
          <td class="paramname"><em>o2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In this function the collision handling from ode is performed. </p>
<p>pre:</p>
<ul>
<li>world_init = true</li>
<li>o1 and o2 are regular geoms</li>
</ul>
<p>post:</p>
<ul>
<li>if o1 or o2 was a Space, called SpaceCollide and exit</li>
<li>otherwise tested if the geoms collide and created a contact joint if so.</li>
</ul>
<p>A lot of the code is uncommented in this function. This code maybe used later to handle sensors or other special cases in the simulation. </p>
<p>test if a space is colliding with something</p>
<p>exit without doing anything if the two bodies are connected by a joint </p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00434">434</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                                           {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordtype">int</span> numc;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="comment">//up to MAX_CONTACTS contact per Box-box</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">//dContact contact[MAX_CONTACTS];</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      dVector3 v1, v;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">//dMatrix3 R;</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      dReal dot;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">if</span> (dGeomIsSpace(o1) || dGeomIsSpace(o2)) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        dSpaceCollide2(o1,o2,<span class="keyword">this</span>,&amp; <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">WorldPhysics::callbackForward</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      dBodyID b1=dGeomGetBody(o1);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      dBodyID b2=dGeomGetBody(o2);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      geom_data* geom_data1 = (geom_data*)dGeomGetData(o1);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      geom_data* geom_data2 = (geom_data*)dGeomGetData(o2);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="comment">// test if we have a ray sensor:</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;ray_sensor) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        dContact contact;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span>(geom_data1-&gt;parent_geom == o2) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span>(geom_data1-&gt;parent_body == dGeomGetBody(o2)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        numc = dCollide(o2, o1, 1|CONTACTS_UNIMPORTANT, &amp;(contact.geom), <span class="keyword">sizeof</span>(dContact));</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span>(numc) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <span class="keywordflow">if</span>(contact.geom.depth &lt; geom_data1-&gt;value)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            geom_data1-&gt;value = contact.geom.depth;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">ray_collision</a> = 1;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(geom_data2-&gt;ray_sensor) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        dContact contact;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span>(geom_data2-&gt;parent_geom == o1) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">if</span>(geom_data2-&gt;parent_body == dGeomGetBody(o1)) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        numc = dCollide(o2, o1, 1|CONTACTS_UNIMPORTANT, &amp;(contact.geom), <span class="keyword">sizeof</span>(dContact));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span>(numc) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">if</span>(contact.geom.depth &lt; geom_data2-&gt;value)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            geom_data2-&gt;value = contact.geom.depth;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">ray_collision</a> = 1;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">if</span>(b1 &amp;&amp; b2 &amp;&amp; dAreConnectedExcluding(b1,b2,dJointTypeContact))</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">if</span>(!b1 &amp;&amp; !b2 &amp;&amp; !geom_data1-&gt;ray_sensor &amp;&amp; !geom_data2-&gt;ray_sensor) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordtype">int</span> maxNumContacts = 0;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.max_num_contacts &lt;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;         geom_data2-&gt;c_params.max_num_contacts) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        maxNumContacts = geom_data1-&gt;c_params.max_num_contacts;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        maxNumContacts = geom_data2-&gt;c_params.max_num_contacts;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      dContact *contact = <span class="keyword">new</span> dContact[maxNumContacts];</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">//for granular test</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="comment">//if( (plane != o2) &amp;&amp; (plane !=o1)) return ;</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">     void* geom_data1 = dGeomGetData(o1);</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">     void* geom_data2 = dGeomGetData(o2);</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">     if((geom_data1 &amp;&amp; ((robot_geom*)geom_data1)-&gt;type &amp; 16)) {</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">     if(plane == o2) return;</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">     if((geom_data2 &amp;&amp; ((robot_geom*)geom_data2)-&gt;type &amp; 16)) return;</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">     }</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">     else if((geom_data2 &amp;&amp; ((robot_geom*)geom_data2)-&gt;type &amp; 16) &amp;&amp; (plane == o1)) return;</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">  </span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">     if((geom_data1 &amp;&amp; ((robot_geom*)geom_data1)-&gt;type &amp; 8) ||</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">     (geom_data2 &amp;&amp; ((robot_geom*)geom_data2)-&gt;type &amp; 8)) {    </span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">     int n;</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">     const int N = MAX_CONTACTS;</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">     dContactGeom contact[N];</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">     n = dCollide (o2,o1,N,contact,sizeof(dContactGeom));</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">     if (n &gt; 0) {</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">     //const dReal ss[3] = {1,0.01,0.01};</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">     for (i=0; i&lt;n; i++) {</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">     contact[i].pos[2] += Z_OFFSET;</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">     if(contact[i].depth &gt; 0.01){</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">     if(geom_data1 &amp;&amp; ((robot_geom*)geom_data1)-&gt;type &amp; 8)</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">     ((robot_geom*)geom_data1)-&gt;i_length = contact[0].depth;</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">     if(geom_data2 &amp;&amp; ((robot_geom*)geom_data2)-&gt;type &amp; 8)</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">     ((robot_geom*)geom_data2)-&gt;i_length = contact[0].depth;</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">     }</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">     }</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">     }</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">     return;</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">     }</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">      */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="comment">// frist we set the softness values:</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      contact[0].surface.mode = dContactSoftERP | dContactSoftCFM;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      contact[0].surface.soft_cfm = (geom_data1-&gt;c_params.cfm +</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                     geom_data2-&gt;c_params.cfm)/2;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      contact[0].surface.soft_erp = (geom_data1-&gt;c_params.erp +</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                     geom_data2-&gt;c_params.erp)/2;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="comment">// then check if one of the geoms want to use the pyramid approximation</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.approx_pyramid ||</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         geom_data2-&gt;c_params.approx_pyramid)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        contact[0].surface.mode |= dContactApprox1;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="comment">// Then check the friction for both directions</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      contact[0].surface.mu = (geom_data1-&gt;c_params.friction1 +</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                               geom_data2-&gt;c_params.friction1)/2;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      contact[0].surface.mu2 = (geom_data1-&gt;c_params.friction2 +</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                geom_data2-&gt;c_params.friction2)/2;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">if</span>(contact[0].surface.mu != contact[0].surface.mu2)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        contact[0].surface.mode |= dContactMu2;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="comment">// check if we have to calculate friction direction1</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.friction_direction1 ||</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         geom_data2-&gt;c_params.friction_direction1) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">// here the calculation becomes more complicated</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// maybe we should make some restrictions</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">// so -&gt; we only use friction motion in friction direction 1</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="comment">// the friction motion is only set if a local vector for friction</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="comment">// direction 1 is given</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">// the steps for the calculation:</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// 1. rotate the local vectors to global coordinates</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// 2. scale the vectors to the length of the motion if given</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// 3. vector 3 =  vector 1 - vector 2</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="comment">// 4. get the length of vector 3</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="comment">// 5. set vector 3 as friction direction 1</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// 6. set motion 1 to the length</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        contact[0].surface.mode |= dContactFDir1;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span>(!geom_data2-&gt;c_params.friction_direction1) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="comment">// get the orientation of the geom</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;          <span class="comment">//dGeomGetQuaternion(o1, v);</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="comment">//dRfromQ(R, v);</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          <span class="comment">// copy the friction direction</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          v1[0] = geom_data1-&gt;c_params.friction_direction1-&gt;x();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          v1[1] = geom_data1-&gt;c_params.friction_direction1-&gt;y();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          v1[2] = geom_data1-&gt;c_params.friction_direction1-&gt;z();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          <span class="comment">// translate the friction direction to global coordinates</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          <span class="comment">// and set friction direction for contact</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          <span class="comment">//dMULTIPLY0_331(contact[0].fdir1, R, v1);</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;          contact[0].fdir1[0] = v1[0];</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          contact[0].fdir1[1] = v1[1];</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          contact[0].fdir1[2] = v1[2];</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          <span class="keywordflow">if</span>(geom_data1-&gt;c_params.motion1) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            contact[0].surface.mode |= dContactMotion1;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            contact[0].surface.motion1 = geom_data1-&gt;c_params.motion1;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!geom_data1-&gt;c_params.friction_direction1) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <span class="comment">// get the orientation of the geom</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          <span class="comment">//dGeomGetQuaternion(o2, v);</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;          <span class="comment">//dRfromQ(R, v);</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          <span class="comment">// copy the friction direction</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;          v1[0] = geom_data2-&gt;c_params.friction_direction1-&gt;x();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;          v1[1] = geom_data2-&gt;c_params.friction_direction1-&gt;y();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          v1[2] = geom_data2-&gt;c_params.friction_direction1-&gt;z();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;          <span class="comment">// translate the friction direction to global coordinates</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          <span class="comment">// and set friction direction for contact</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;          <span class="comment">//dMULTIPLY0_331(contact[0].fdir1, R, v1);</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;          contact[0].fdir1[0] = v1[0];</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          contact[0].fdir1[1] = v1[1];</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          contact[0].fdir1[2] = v1[2];</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          <span class="keywordflow">if</span>(geom_data2-&gt;c_params.motion1) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            contact[0].surface.mode |= dContactMotion1;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            contact[0].surface.motion1 = geom_data2-&gt;c_params.motion1;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;          <span class="comment">// the calculation steps as mentioned above</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;          fprintf(stderr, <span class="stringliteral">&quot;the calculation for friction directen set for both nodes is not done yet.\n&quot;</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">// then check for fds</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.fds1 || geom_data2-&gt;c_params.fds1) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        contact[0].surface.mode |= dContactSlip1;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        contact[0].surface.slip1 = (geom_data1-&gt;c_params.fds1 +</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                    geom_data2-&gt;c_params.fds1);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.fds2 || geom_data2-&gt;c_params.fds2) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        contact[0].surface.mode |= dContactSlip2;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        contact[0].surface.slip2 = (geom_data1-&gt;c_params.fds2 +</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                    geom_data2-&gt;c_params.fds2);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">if</span>(geom_data1-&gt;c_params.bounce || geom_data2-&gt;c_params.bounce) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        contact[0].surface.mode |= dContactBounce;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        contact[0].surface.bounce = (geom_data1-&gt;c_params.bounce +</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                     geom_data2-&gt;c_params.bounce);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span>(geom_data1-&gt;c_params.bounce_vel &gt; geom_data2-&gt;c_params.bounce_vel)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          contact[0].surface.bounce_vel = geom_data1-&gt;c_params.bounce_vel;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;          contact[0].surface.bounce_vel = geom_data2-&gt;c_params.bounce_vel;      </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">for</span> (i=1;i&lt;maxNumContacts;i++){</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        contact[i] = contact[0];</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      numc=dCollide(o1,o2, maxNumContacts, &amp;contact[0].geom,<span class="keyword">sizeof</span>(dContact));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">if</span>(numc){ </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        dJointFeedback *fb;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        draw_item item;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">Vector</a> contact_point;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a>++;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">create_contacts</a>) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          fb = 0;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          item.id = 0;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          item.type = <a class="code" href="../../d8/dec/namespacemars_1_1interfaces.html#afaa447bd92092eef009ac0fdb053862aab657de069912a45fdecedec3eb0e1bb1">DRAW_LINE</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;          item.draw_state = <a class="code" href="../../d4/d78/draw__structs_8h.html#a08e08adc64e13065009ab11446bcf96b">DRAW_STATE_CREATE</a>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;          item.point_size = 10;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;          item.myColor.r = 1;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;          item.myColor.g = 0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;          item.myColor.b = 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;          item.myColor.a = 1;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          item.label = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;          item.t_width = item.t_height = 0;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;          item.texture = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;          item.get_light = 0;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <span class="keywordflow">for</span>(i=0;i&lt;numc;i++){</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            item.start.x() = contact[i].geom.pos[0];</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            item.start.y() = contact[i].geom.pos[1];</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            item.start.z() = contact[i].geom.pos[2];</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            item.end.x() = contact[i].geom.pos[0] + contact[i].geom.normal[0];</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            item.end.y() = contact[i].geom.pos[1] + contact[i].geom.normal[1];</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            item.end.z() = contact[i].geom.pos[2] + contact[i].geom.normal[2];</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">draw_intern</a>.push_back(item);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">if</span>(geom_data1-&gt;c_params.friction_direction1 ||</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;               geom_data2-&gt;c_params.friction_direction1) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;              v[0] = contact[i].geom.normal[0];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;              v[1] = contact[i].geom.normal[1];</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;              v[2] = contact[i].geom.normal[2];</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;              dot = dDOT(v, contact[i].fdir1);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;              dOPEC(v, *=, dot);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;              contact[i].fdir1[0] -= v[0];</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;              contact[i].fdir1[1] -= v[1];</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;              contact[i].fdir1[2] -= v[2];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;              dNormalize3(contact[0].fdir1);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            contact[0].geom.depth += (geom_data1-&gt;c_params.depth_correction +</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                      geom_data2-&gt;c_params.depth_correction);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            <span class="keywordflow">if</span>(contact[0].geom.depth &lt; 0.0) contact[0].geom.depth = 0.0;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            dJointID c=dJointCreateContact(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>,<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a>,contact+i);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            dJointAttach(c,b1,b2);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            geom_data1-&gt;num_ground_collisions += numc;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            geom_data2-&gt;num_ground_collisions += numc;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            contact_point.x() = contact[i].geom.pos[0];</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            contact_point.y() = contact[i].geom.pos[1];</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            contact_point.z() = contact[i].geom.pos[2];</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            geom_data1-&gt;contact_ids.push_back(geom_data2-&gt;id);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            geom_data2-&gt;contact_ids.push_back(geom_data1-&gt;id);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            geom_data1-&gt;contact_points.push_back(contact_point);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            geom_data2-&gt;contact_points.push_back(contact_point);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="comment">//if(dGeomGetClass(o1) == dPlaneClass) {</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            fb = 0;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">if</span>(geom_data2-&gt;sense_contact_force) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;              fb = (dJointFeedback*)malloc(<span class="keyword">sizeof</span>(dJointFeedback));</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;              dJointSetFeedback(c, fb);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;              <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a>.push_back(fb);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;              geom_data2-&gt;ground_feedbacks.push_back(fb);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;              geom_data2-&gt;node1 = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            } </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            <span class="comment">//else if(dGeomGetClass(o2) == dPlaneClass) {</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <span class="keywordflow">if</span>(geom_data1-&gt;sense_contact_force) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;              <span class="keywordflow">if</span>(!fb) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                fb = (dJointFeedback*)malloc(<span class="keyword">sizeof</span>(dJointFeedback));</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                dJointSetFeedback(c, fb);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a>.push_back(fb);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;              }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;              geom_data1-&gt;ground_feedbacks.push_back(fb);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;              geom_data1-&gt;node1 = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keyword">delete</span>[] contact;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a7014cfdecaa2cc84314b4cd4ef5136b0"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">mars::sim::WorldPhysics::contact_feedback_list</a></div><div class="ttdeci">std::vector&lt; dJointFeedback * &gt; contact_feedback_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00126">WorldPhysics.h:126</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="draw__structs_8h_html_a08e08adc64e13065009ab11446bcf96b"><div class="ttname"><a href="../../d4/d78/draw__structs_8h.html#a08e08adc64e13065009ab11446bcf96b">DRAW_STATE_CREATE</a></div><div class="ttdeci">#define DRAW_STATE_CREATE</div><div class="ttdoc">This class contains all drawStructs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/draw__structs_8h_source.html#l00043">draw_structs.h:43</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae4e992b3a5f7d37af57f91c2a2723cd3"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">mars::sim::WorldPhysics::num_contacts</a></div><div class="ttdeci">int num_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00128">WorldPhysics.h:128</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a22e90498995ed247107895b1293fc6f0"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a22e90498995ed247107895b1293fc6f0">mars::sim::WorldPhysics::ray_collision</a></div><div class="ttdeci">int ray_collision</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00129">WorldPhysics.h:129</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adcc9baa34518f8a3e52a7b16066c9b17"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">mars::sim::WorldPhysics::contactgroup</a></div><div class="ttdeci">dJointGroupID contactgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00117">WorldPhysics.h:117</a></div></div>
<div class="ttc" id="namespacemars_1_1utils_html_a878c2da91f03d7f72c4326de3713cad8"><div class="ttname"><a href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">mars::utils::Vector</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vector</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/_vector_8h_source.html#l00043">Vector.h:43</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3b7cfb1d19c3f2813c7f82c895dba254"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">mars::sim::WorldPhysics::create_contacts</a></div><div class="ttdeci">bool create_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="namespacemars_1_1interfaces_html_afaa447bd92092eef009ac0fdb053862aab657de069912a45fdecedec3eb0e1bb1"><div class="ttname"><a href="../../d8/dec/namespacemars_1_1interfaces.html#afaa447bd92092eef009ac0fdb053862aab657de069912a45fdecedec3eb0e1bb1">mars::interfaces::DRAW_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/draw__structs_8h_source.html#l00061">draw_structs.h:61</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_af5f4f588b651da097ac096378523acb8"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">mars::sim::WorldPhysics::callbackForward</a></div><div class="ttdeci">static void callbackForward(void *data, dGeomID o1, dGeomID o2)</div><div class="ttdoc">This static function is used to project a normal function pointer to a method from a class...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00752">WorldPhysics.cpp:752</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a98a204b4fc77e71f70765f004e815a76"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">mars::sim::WorldPhysics::draw_intern</a></div><div class="ttdeci">std::vector&lt; interfaces::draw_item &gt; draw_intern</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00124">WorldPhysics.h:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acdafca3909ab4629997b23bd032e87cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::resetCompositeMass </td>
          <td>(</td>
          <td class="paramtype">dBodyID&#160;</td>
          <td class="paramname"><em>theBody</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>resets the mass of a composite body </p>
<p>pre:</p>
<ul>
<li>the body exists in the physical world</li>
</ul>
<p>post: </p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00765">765</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                                         {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      std::vector&lt;body_nbr_tupel&gt;::iterator iter;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      std::vector&lt;NodePhysics*&gt;::iterator jter;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      dMass bodyMass, tmpMass;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="comment">//bool first = 1;</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">for</span>(iter = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.begin(); iter != <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">comp_body_list</a>.end(); iter++) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">if</span>((*iter).body == theBody) {      </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          dMassSetZero(&amp;bodyMass);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          <span class="keywordflow">for</span>(jter = (*iter).comp_nodes.begin();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;              jter != (*iter).comp_nodes.end(); jter++) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            (*jter)-&gt;addMassToCompositeBody(theBody, &amp;bodyMass);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;          dBodySetMass(theBody, &amp;bodyMass);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad3b397ad6a1bc0c080f6e79286818428"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad3b397ad6a1bc0c080f6e79286818428">mars::sim::WorldPhysics::comp_body_list</a></div><div class="ttdeci">std::vector&lt; body_nbr_tupel &gt; comp_body_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00123">WorldPhysics.h:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78f997528c9377badb46e32ad03b78ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::stepTheWorld </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function handles the calculation of a step in the world. </p>
<p>pre:</p>
<ul>
<li>world_init = true</li>
<li>step_size &gt; 0</li>
</ul>
<p>post:</p>
<ul>
<li>handled the collisions</li>
<li>step the world for step_size seconds</li>
<li>the contactgroup should be empty </li>
</ul>
<p>first clear the collision counters of all geoms</p>
<p>then we have to clear the contacts</p>
<p>first check for collisions</p>
<p>then calculate the next state for a time of step_size seconds </p>

<p>Implements <a class="el" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a2a6bb1814368f28023b74525769963a1">mars::interfaces::PhysicsInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00226">226</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                        {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">iMutex</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      std::vector&lt;dJointFeedback*&gt;::iterator iter;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      geom_data* data;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">// if world_init = false or step_size &lt;= 0 debug something</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">world_init</a> &amp;&amp; <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a> &gt; 0) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">old_gravity</a> != <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">old_gravity</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;          dWorldSetGravity(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.x(),</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                           <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.y(), <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">world_gravity</a>.z());</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">old_cfm</a> != <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a>) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">old_cfm</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;          dWorldSetCFM(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, (dReal)<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">world_cfm</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">old_erp</a> != <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a>) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">old_erp</a> = <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          dWorldSetERP(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, (dReal)<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">world_erp</a>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">for</span>(i=0; i&lt;dSpaceGetNumGeoms(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>); i++) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          data = (geom_data*)dGeomGetData(dSpaceGetGeom(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>, i));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          data-&gt;num_ground_collisions = 0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          data-&gt;contact_ids.clear();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          data-&gt;contact_points.clear();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          data-&gt;ground_feedbacks.clear();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">for</span>(iter = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a>.begin();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            iter != <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a>.end(); iter++) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          free((*iter));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">contact_feedback_list</a>.clear();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">draw_intern</a>.clear();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        dJointGroupEmpty(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">contactgroup</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">num_contacts</a> = <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">log_contacts</a> = 0;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">create_contacts</a> = 1;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        dSpaceCollide(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">space</a>,<span class="keyword">this</span>, &amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">WorldPhysics::callbackForward</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">drawLock</a>.<a class="code" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html#a2faece5e9804f06a6cbce95a82bd7bbc">lock</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">draw_extern</a>.swap(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">draw_intern</a>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">drawLock</a>.<a class="code" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html#a14156b948ac8326c1fc2e3d4e2506266">unlock</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0c872f3cd891d401173f0cc6dab01e09">fast_step</a>) dWorldQuickStep(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          <span class="keywordflow">else</span> dWorldStep(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">world</a>, <a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">step_size</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>-&gt;<a class="code" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a80e8098628dfd0fb265224187b2f0c06">sim</a>-&gt;<a class="code" href="../../dc/de5/classmars_1_1interfaces_1_1_simulator_interface.html#a4a66429ca1a0dd8df44f316311e6f4e5">handleError</a>(<a class="code" href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27ab1375d15da11a358dbaa07eb85b1d853">PHYSICS_UNKNOWN</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a166a824453829b32a67ae3d6537c41e5">WorldPhysics::error</a>) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">control</a>-&gt;<a class="code" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a80e8098628dfd0fb265224187b2f0c06">sim</a>-&gt;<a class="code" href="../../dc/de5/classmars_1_1interfaces_1_1_simulator_interface.html#a4a66429ca1a0dd8df44f316311e6f4e5">handleError</a>(<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a166a824453829b32a67ae3d6537c41e5">WorldPhysics::error</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a166a824453829b32a67ae3d6537c41e5">WorldPhysics::error</a> = <a class="code" href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27a984146ec5abe76bc7208c5c5c61abc69">PHYSICS_NO_ERROR</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adbd415f675224c4921b9acc9ec134fc7"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbd415f675224c4921b9acc9ec134fc7">mars::sim::WorldPhysics::old_gravity</a></div><div class="ttdeci">utils::Vector old_gravity</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00120">WorldPhysics.h:120</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a40b23b306bf81a2ee57429bf90567698"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a40b23b306bf81a2ee57429bf90567698">mars::interfaces::PhysicsInterface::world_gravity</a></div><div class="ttdeci">utils::Vector world_gravity</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00057">PhysicsInterface.h:57</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a937793318e80bc5e339db76790c7fbca"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a937793318e80bc5e339db76790c7fbca">mars::sim::WorldPhysics::log_contacts</a></div><div class="ttdeci">bool log_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a42f3e63cfb276a7f638ab7b2ad0cb7dd"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a42f3e63cfb276a7f638ab7b2ad0cb7dd">mars::interfaces::PhysicsInterface::world_cfm</a></div><div class="ttdeci">sReal world_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a16cbf034b628f8a238fbb69ad2f7b7f5"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">mars::sim::WorldPhysics::draw_extern</a></div><div class="ttdeci">std::vector&lt; interfaces::draw_item &gt; draw_extern</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00125">WorldPhysics.h:125</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3a95c1788dab57d4e338c4bb08be5a46"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3a95c1788dab57d4e338c4bb08be5a46">mars::sim::WorldPhysics::world_init</a></div><div class="ttdeci">bool world_init</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00118">WorldPhysics.h:118</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae888578321a1189624890dca8d7aa784"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae888578321a1189624890dca8d7aa784">mars::sim::WorldPhysics::iMutex</a></div><div class="ttdeci">utils::Mutex iMutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00108">WorldPhysics.h:108</a></div></div>
<div class="ttc" id="classmars_1_1utils_1_1_mutex_html_a14156b948ac8326c1fc2e3d4e2506266"><div class="ttname"><a href="../../d6/d90/classmars_1_1utils_1_1_mutex.html#a14156b948ac8326c1fc2e3d4e2506266">mars::utils::Mutex::unlock</a></div><div class="ttdeci">MutexError unlock()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4c/_mutex_8cpp_source.html#l00077">Mutex.cpp:77</a></div></div>
<div class="ttc" id="namespacemars_1_1interfaces_html_a30a6d987d40142b1fd894f96adbc7c27a984146ec5abe76bc7208c5c5c61abc69"><div class="ttname"><a href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27a984146ec5abe76bc7208c5c5c61abc69">mars::interfaces::PHYSICS_NO_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00046">PhysicsInterface.h:46</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a7014cfdecaa2cc84314b4cd4ef5136b0"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a7014cfdecaa2cc84314b4cd4ef5136b0">mars::sim::WorldPhysics::contact_feedback_list</a></div><div class="ttdeci">std::vector&lt; dJointFeedback * &gt; contact_feedback_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00126">WorldPhysics.h:126</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adaa62b97cc64dab6af4175b6afd7abc9"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adaa62b97cc64dab6af4175b6afd7abc9">mars::sim::WorldPhysics::world</a></div><div class="ttdeci">dWorldID world</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00115">WorldPhysics.h:115</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a166a824453829b32a67ae3d6537c41e5"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a166a824453829b32a67ae3d6537c41e5">mars::sim::WorldPhysics::error</a></div><div class="ttdeci">static interfaces::PhysicsError error</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00110">WorldPhysics.h:110</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a89ddb6065e450ef31627674a91e5c310"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">mars::sim::WorldPhysics::drawLock</a></div><div class="ttdeci">utils::Mutex drawLock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00113">WorldPhysics.h:113</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adb15a5f58a7ed63f643526d1c3d6e8cd"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adb15a5f58a7ed63f643526d1c3d6e8cd">mars::sim::WorldPhysics::space</a></div><div class="ttdeci">dSpaceID space</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00114">WorldPhysics.h:114</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a6b84008122d854153a151794c08941f1"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a6b84008122d854153a151794c08941f1">mars::interfaces::PhysicsInterface::world_erp</a></div><div class="ttdeci">sReal world_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00060">PhysicsInterface.h:60</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ad1d09b66049e3de049c4edf104e769a1"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ad1d09b66049e3de049c4edf104e769a1">mars::sim::WorldPhysics::old_cfm</a></div><div class="ttdeci">interfaces::sReal old_cfm</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00121">WorldPhysics.h:121</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_ae4e992b3a5f7d37af57f91c2a2723cd3"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#ae4e992b3a5f7d37af57f91c2a2723cd3">mars::sim::WorldPhysics::num_contacts</a></div><div class="ttdeci">int num_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00128">WorldPhysics.h:128</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a8c25f2162ac9aa89a19dcf959461df13"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a8c25f2162ac9aa89a19dcf959461df13">mars::interfaces::PhysicsInterface::step_size</a></div><div class="ttdeci">sReal step_size</div><div class="ttdoc">Step size in seconds. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00056">PhysicsInterface.h:56</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adcc9baa34518f8a3e52a7b16066c9b17"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adcc9baa34518f8a3e52a7b16066c9b17">mars::sim::WorldPhysics::contactgroup</a></div><div class="ttdeci">dJointGroupID contactgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00117">WorldPhysics.h:117</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a3b7cfb1d19c3f2813c7f82c895dba254"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a3b7cfb1d19c3f2813c7f82c895dba254">mars::sim::WorldPhysics::create_contacts</a></div><div class="ttdeci">bool create_contacts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00127">WorldPhysics.h:127</a></div></div>
<div class="ttc" id="namespacemars_1_1interfaces_html_a30a6d987d40142b1fd894f96adbc7c27ab1375d15da11a358dbaa07eb85b1d853"><div class="ttname"><a href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27ab1375d15da11a358dbaa07eb85b1d853">mars::interfaces::PHYSICS_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00049">PhysicsInterface.h:49</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_control_center_html_a80e8098628dfd0fb265224187b2f0c06"><div class="ttname"><a href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html#a80e8098628dfd0fb265224187b2f0c06">mars::interfaces::ControlCenter::sim</a></div><div class="ttdeci">SimulatorInterface * sim</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbb/_control_center_8h_source.html#l00103">ControlCenter.h:103</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a6e3ce712f543582c4ad43b75aa8b7b95"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a6e3ce712f543582c4ad43b75aa8b7b95">mars::sim::WorldPhysics::control</a></div><div class="ttdeci">interfaces::ControlCenter * control</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00119">WorldPhysics.h:119</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_af5f4f588b651da097ac096378523acb8"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#af5f4f588b651da097ac096378523acb8">mars::sim::WorldPhysics::callbackForward</a></div><div class="ttdeci">static void callbackForward(void *data, dGeomID o1, dGeomID o2)</div><div class="ttdoc">This static function is used to project a normal function pointer to a method from a class...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/_world_physics_8cpp_source.html#l00752">WorldPhysics.cpp:752</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_simulator_interface_html_a4a66429ca1a0dd8df44f316311e6f4e5"><div class="ttname"><a href="../../dc/de5/classmars_1_1interfaces_1_1_simulator_interface.html#a4a66429ca1a0dd8df44f316311e6f4e5">mars::interfaces::SimulatorInterface::handleError</a></div><div class="ttdeci">virtual void handleError(PhysicsError error)=0</div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a98a204b4fc77e71f70765f004e815a76"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a98a204b4fc77e71f70765f004e815a76">mars::sim::WorldPhysics::draw_intern</a></div><div class="ttdeci">std::vector&lt; interfaces::draw_item &gt; draw_intern</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00124">WorldPhysics.h:124</a></div></div>
<div class="ttc" id="classmars_1_1utils_1_1_mutex_html_a2faece5e9804f06a6cbce95a82bd7bbc"><div class="ttname"><a href="../../d6/d90/classmars_1_1utils_1_1_mutex.html#a2faece5e9804f06a6cbce95a82bd7bbc">mars::utils::Mutex::lock</a></div><div class="ttdeci">MutexError lock()</div><div class="ttdoc">locks the Mutex </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4c/_mutex_8cpp_source.html#l00061">Mutex.cpp:61</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a0c872f3cd891d401173f0cc6dab01e09"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a0c872f3cd891d401173f0cc6dab01e09">mars::interfaces::PhysicsInterface::fast_step</a></div><div class="ttdeci">bool fast_step</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00058">PhysicsInterface.h:58</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_adbc642746e0b511659fda3fa239477ab"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#adbc642746e0b511659fda3fa239477ab">mars::sim::WorldPhysics::old_erp</a></div><div class="ttdeci">interfaces::sReal old_erp</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00121">WorldPhysics.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1aed565f0778a9bf7284cb04417dd222"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mars::sim::WorldPhysics::update </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a> &gt; *&#160;</td>
          <td class="paramname"><em>drawItems</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the update function that updates the position of the vertices of all draw_item structs contained in drawItems. </p>

<p>Implements <a class="el" href="../../de/ded/classmars_1_1interfaces_1_1_draw_interface.html#a02dcc08a6f3f612767079c865308fb3b">mars::interfaces::DrawInterface</a>.</p>

<p>Definition at line <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html#l00823">823</a> of file <a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                                             {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      MutexLocker locker(&amp;<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">drawLock</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      std::vector&lt;draw_item&gt;::iterator iter;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">for</span>(iter=drawItems-&gt;begin(); iter!=drawItems-&gt;end(); iter++) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        iter-&gt;draw_state = <a class="code" href="../../d4/d78/draw__structs_8h.html#a1d60d0d7c7bc012d79af0ae65cb85381">DRAW_STATE_ERASE</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a444a06fb0422b9b3de98b9e90b694657">draw_contact_points</a>) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">for</span>(iter=<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">draw_extern</a>.begin(); iter!=<a class="code" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">draw_extern</a>.end(); iter++) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          drawItems-&gt;push_back(*iter);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a16cbf034b628f8a238fbb69ad2f7b7f5"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a16cbf034b628f8a238fbb69ad2f7b7f5">mars::sim::WorldPhysics::draw_extern</a></div><div class="ttdeci">std::vector&lt; interfaces::draw_item &gt; draw_extern</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00125">WorldPhysics.h:125</a></div></div>
<div class="ttc" id="draw__structs_8h_html_a1d60d0d7c7bc012d79af0ae65cb85381"><div class="ttname"><a href="../../d4/d78/draw__structs_8h.html#a1d60d0d7c7bc012d79af0ae65cb85381">DRAW_STATE_ERASE</a></div><div class="ttdeci">#define DRAW_STATE_ERASE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/draw__structs_8h_source.html#l00045">draw_structs.h:45</a></div></div>
<div class="ttc" id="classmars_1_1interfaces_1_1_physics_interface_html_a444a06fb0422b9b3de98b9e90b694657"><div class="ttname"><a href="../../d0/d22/classmars_1_1interfaces_1_1_physics_interface.html#a444a06fb0422b9b3de98b9e90b694657">mars::interfaces::PhysicsInterface::draw_contact_points</a></div><div class="ttdeci">bool draw_contact_points</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dec/_physics_interface_8h_source.html#l00059">PhysicsInterface.h:59</a></div></div>
<div class="ttc" id="classmars_1_1sim_1_1_world_physics_html_a89ddb6065e450ef31627674a91e5c310"><div class="ttname"><a href="../../de/d02/classmars_1_1sim_1_1_world_physics.html#a89ddb6065e450ef31627674a91e5c310">mars::sim::WorldPhysics::drawLock</a></div><div class="ttdeci">utils::Mutex drawLock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d89/_world_physics_8h_source.html#l00113">WorldPhysics.h:113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad3b397ad6a1bc0c080f6e79286818428"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d1/dfb/structmars_1_1sim_1_1body__nbr__tupel.html">body_nbr_tupel</a>&gt; mars::sim::WorldPhysics::comp_body_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00123">123</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7014cfdecaa2cc84314b4cd4ef5136b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;dJointFeedback*&gt; mars::sim::WorldPhysics::contact_feedback_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00126">126</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="adcc9baa34518f8a3e52a7b16066c9b17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dJointGroupID mars::sim::WorldPhysics::contactgroup</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00117">117</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6e3ce712f543582c4ad43b75aa8b7b95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d4e/classmars_1_1interfaces_1_1_control_center.html">interfaces::ControlCenter</a>* mars::sim::WorldPhysics::control</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00119">119</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3b7cfb1d19c3f2813c7f82c895dba254"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mars::sim::WorldPhysics::create_contacts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00127">127</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a16cbf034b628f8a238fbb69ad2f7b7f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a>&gt; mars::sim::WorldPhysics::draw_extern</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00125">125</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a98a204b4fc77e71f70765f004e815a76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d9/d9a/structmars_1_1interfaces_1_1draw__item.html">interfaces::draw_item</a>&gt; mars::sim::WorldPhysics::draw_intern</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00124">124</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a89ddb6065e450ef31627674a91e5c310"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html">utils::Mutex</a> mars::sim::WorldPhysics::drawLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00113">113</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a166a824453829b32a67ae3d6537c41e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a30a6d987d40142b1fd894f96adbc7c27">PhysicsError</a> mars::sim::WorldPhysics::error = PHYSICS_NO_ERROR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00110">110</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae888578321a1189624890dca8d7aa784"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d90/classmars_1_1utils_1_1_mutex.html">utils::Mutex</a> mars::sim::WorldPhysics::iMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00108">108</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a937793318e80bc5e339db76790c7fbca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mars::sim::WorldPhysics::log_contacts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00127">127</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae4e992b3a5f7d37af57f91c2a2723cd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mars::sim::WorldPhysics::num_contacts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00128">128</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad1d09b66049e3de049c4edf104e769a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a> mars::sim::WorldPhysics::old_cfm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00121">121</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="adbc642746e0b511659fda3fa239477ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dec/namespacemars_1_1interfaces.html#a0214a0e5003a1d8362b66e3fda378b2e">interfaces::sReal</a> mars::sim::WorldPhysics::old_erp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00121">121</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="adbd415f675224c4921b9acc9ec134fc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/da5/namespacemars_1_1utils.html#a878c2da91f03d7f72c4326de3713cad8">utils::Vector</a> mars::sim::WorldPhysics::old_gravity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00120">120</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac1e76e1aa6d0db039aeb482fa941640e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dGeomID mars::sim::WorldPhysics::plane</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00116">116</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22e90498995ed247107895b1293fc6f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mars::sim::WorldPhysics::ray_collision</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00129">129</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="adb15a5f58a7ed63f643526d1c3d6e8cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dSpaceID mars::sim::WorldPhysics::space</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00114">114</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="adaa62b97cc64dab6af4175b6afd7abc9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dWorldID mars::sim::WorldPhysics::world</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00115">115</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a95c1788dab57d4e338c4bb08be5a46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mars::sim::WorldPhysics::world_init</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d6/d89/_world_physics_8h_source.html#l00118">118</a> of file <a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/kavonszadkowski/limes-dev/simulation/mars/sim/src/physics/<a class="el" href="../../d6/d89/_world_physics_8h_source.html">WorldPhysics.h</a></li>
<li>/home/kavonszadkowski/limes-dev/simulation/mars/sim/src/physics/<a class="el" href="../../d0/dad/_world_physics_8cpp_source.html">WorldPhysics.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../df/d48/namespacemars.html">mars</a></li><li class="navelem"><a class="el" href="../../d2/d57/namespacemars_1_1sim.html">sim</a></li><li class="navelem"><a class="el" href="../../de/d02/classmars_1_1sim_1_1_world_physics.html">WorldPhysics</a></li>
    <li class="footer">Generated on Tue Mar 24 2015 13:10:24 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
