<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SMURF SVG Scenes</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../mars_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo_triple.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">An open-source, flexible 3D physical simulation framework</div>
    </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/da5/smurfs_svg.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SMURF SVG Scenes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>MARS understands a variety of the SMURF scene format using <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">Scalable Vector Graphics (SVG)</a> to place entities. If your world environment is mostly two-dimensional, this is very handy as it allows to create scenes at the same time as creating nice maps of these scenes. A great free editor for vector graphics is <a href="https://inkscape.org">Inkscape</a> (though we recommend saving your files not as 'inkscape svg', but plain svg).</p>
<h2>Structure of SMURF SVGs</h2>
<p>SVG is an XML format of which SMURF SVGs use only a minor subset. As of now (March 2015), there are two main elements of the XML tree that are interpreted: <code>&lt;svg&gt;</code> which is the root element and <code>&lt;g&gt;</code>, which defines a group. While the former contains data on the overall scene, each group element represents an entity in the simulation and thus store entity data. A minimalist example would look like this: </p>
<pre class="fragment">&lt;svg
   id="my_svg_scene"
   width="10.0"
   height="10.0"&gt;
 &lt;g
    transform="matrix(0,1,-1,0,44.2,0)"
    id="entity_1"&gt;
   &lt;title&gt;entity_library/my_entity.yml&lt;/title&gt;
   &lt;path
      d="m 0,30 1,0"
      id="entity_1_origin" /&gt;
 &lt;/g&gt;
&lt;/svg&gt;
</pre><p>which admittedly is a lot to swallow for a minimalist example. We had to cannibalize a number of properties and tags to use SVG for SMURF scenes - let's walk through it step by step.</p>
<h3><code>&lt;svg&gt;</code></h3>
<p>In order to correctly arrange the elements of a scene, we need to create a reference frame by defining the width and height of the svg element.</p>
<table class="doxtable">
<tr>
<th>property </th><th>use for SMURF scene  </th></tr>
<tr>
<td>id </td><td>name of the scene </td></tr>
<tr>
<td>width </td><td>width of the scene in meters </td></tr>
<tr>
<td>height </td><td>height of the scene in meters </td></tr>
</table>
<h3><code>&lt;g&gt;</code></h3>
<p><code>&lt;g&gt;</code> is used to group geometrical shapes as well as additional elements containing data on the group. Thus using groups to represent entities allows to visualize them in a way that the creator of the scene deems appropriate for its purpose and faithful to the actual appearance of the entity. That being said, there are a number of required elements.</p>
<table class="doxtable">
<tr>
<th>property </th><th>use for SMURF scene  </th></tr>
<tr>
<td>id </td><td>name of the entity </td></tr>
<tr>
<td>transform </td><td>transformation (matrix) defining the orientation of the entity </td></tr>
</table>
<h3><code>&lt;title&gt;</code></h3>
<p>The title contains the URI to the .yml file which contains the definition of the entity, i.e. the parameters and their values that define it.</p>
<h3><code>&lt;path&gt;</code></h3>
<p>While the transform of the entity is stored in the <em>transform</em> property of the SMURF scene, we still need a way to also save the position of the entity. For this, we use a <em>path</em> element with two points, the first of which defining the origin of the entity.</p>
<table class="doxtable">
<tr>
<th>property </th><th>use for SMURF scene  </th></tr>
<tr>
<td>id </td><td>name of the entity's origin </td></tr>
<tr>
<td>d </td><td>path definition with two points, the first one being the origin of the entity </td></tr>
</table>
<p>As for the formatting of the <code>d</code> attribute, we recommend checking out <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d">its description on the Mozilla Developer Network</a> which is also a good source for info on other SVG elements.</p>
<blockquote class="doxtable">
<p><b>NOTE:</b> All x- and y-coordinate definition in SVG use a coordinate system with x pointing right and y pointing down. In order to avoid mirroring scenes and thus provide a WYSIWYG experience, MARS however interprets an SVG as x pointing right and Y pointing up. Keep that in mind when setting the values for x and y parameters. In fact, if you use an SVG editor such as Inkscape (and you really should, because if you don't, you might as well create .yml descriptions directly), the editor will take care of this for you.</p>
<p></p>
</blockquote>
<h3><code>&lt;rect&gt;</code></h3>
<p>Many entities have not only a position, but also a dynamically adjustable width and height. For such cases, our parser expects to find a <code>rect</code> element: </p>
<pre class="fragment">&lt;g&gt;
  ...
  &lt;rect
     width="5.0"
     height="3.5"
     x="3.0"
     y="4.7"
     id="entity_1_bbox" /&gt;
&lt;/g&gt;
</pre><p>A rectangle element essentially defines a bounding box for the entity.</p>
<table class="doxtable">
<tr>
<th>property </th><th>use for SMURF scene  </th></tr>
<tr>
<td>id </td><td>name of the bounding box element </td></tr>
<tr>
<td>x </td><td>x position of the bbox </td></tr>
<tr>
<td>y </td><td>y position of the bbox </td></tr>
<tr>
<td>width </td><td>width of the entity </td></tr>
<tr>
<td>height </td><td>height of the entity </td></tr>
</table>
<p>Consequently, the attributes <code>width</code> and <code>height</code> get translated into the respective config parameters of the entity's <code>ConfigMap</code>.</p>
<h2>Custom properties in SVG scenes</h2>
<p>We are planning to allow properties not only to be defined in the the references .yml file, but also to store entity properties directly in a <code>&lt;desc&gt;</code> element of the group defining an entity. As of now (March 2015), this functionality has not been implemented, except for one single property: "origin_z", which defines the Z component of an entity's position, like so: </p>
<pre class="fragment">&lt;g&gt;
  ...
  &lt;desc&gt;origin_z: 0.0&lt;/desc&gt;
&lt;/g&gt;
</pre><blockquote class="doxtable">
<p><b>NOTE:</b> The properties <em>origin_x</em>, <em>origin_y</em> and <em>origin_z</em> are properties currently being replaced by a single list-property of entities called <em>position</em>. We will maintain backwards-compatibility, though.</p>
<p></p>
</blockquote>
<h2>Parser</h2>
<p>The code parsing SMURF SVGs is currently located in the <a class="el" href="../../d2/d19/classmars_1_1smurf_1_1_s_m_u_r_f_loader.html">mars::smurf::SMURFLoader</a> class. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Oct 13 2016 15:08:32 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
